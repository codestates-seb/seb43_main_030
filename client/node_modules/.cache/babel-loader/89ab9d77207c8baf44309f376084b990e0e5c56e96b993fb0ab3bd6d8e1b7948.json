{"ast":null,"code":"import _regeneratorRuntime from\"/Users/jieun/Desktop/main-project/idle/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/jieun/Desktop/main-project/idle/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/jieun/Desktop/main-project/idle/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useMemo,useCallback,memo,useRef,useState}from'react';import axios from'axios';import ReactQuill,{Quill}from'react-quill';import'react-quill/dist/quill.snow.css';import{jsx as _jsx}from\"react/jsx-runtime\";var QuillEditor=/*#__PURE__*/memo(function(_ref){var content=_ref.content,setContent=_ref.setContent,contents=_ref.contents,setContents=_ref.setContents,postId=_ref.postId,setImg=_ref.setImg;var quillRef=useRef(null);var _useState=useState(null),_useState2=_slicedToArray(_useState,2),previewImage=_useState2[0],setPreviewImage=_useState2[1];var imageHandler=useCallback(function(){var input=document.createElement('input');input.setAttribute('type','file');input.setAttribute('accept','image/*');input.click();input.onchange=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var file,uploadData,response,imageUrl,quill,range;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:file=input.files[0];// setImg(prevImg => [...prevImg, file]);\nuploadData=new FormData();uploadData.append('image',file);_context.prev=3;_context.next=6;return axios.post('https://api.imgbb.com/1/upload',uploadData,{params:{key:'8cb7f3bf3855c3503ff3954bf87159bf'}});case 6:response=_context.sent;imageUrl=response.data.data.url;quill=quillRef.current.getEditor();range=quill.getSelection(true);quill.insertEmbed(range.index,'image',imageUrl);quill.setSelection(range.index+1);_context.next=17;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](3);console.error('Error uploading image:',_context.t0);case 17:case\"end\":return _context.stop();}},_callee,null,[[3,14]]);}));},[]);var modules=useMemo(function(){return{toolbar:{container:[['bold','italic','underline','strike','blockquote'],[{size:['small',false,'large','huge']},{color:[]}],[{list:'ordered'},{list:'bullet'},{indent:'-1'},{indent:'+1'},{align:[]}],['image']],handlers:{image:imageHandler}}};},[imageHandler]);return/*#__PURE__*/_jsx(ReactQuill,{style:{height:'400px'},ref:quillRef,value:postId?contents:content,onChange:postId?setContents:setContent,modules:modules,theme:\"snow\",placeholder:\"\\uB0B4\\uC6A9\\uC744 \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694.\"});});export default QuillEditor;","map":{"version":3,"names":["React","useMemo","useCallback","memo","useRef","useState","axios","ReactQuill","Quill","jsx","_jsx","QuillEditor","_ref","content","setContent","contents","setContents","postId","setImg","quillRef","_useState","_useState2","_slicedToArray","previewImage","setPreviewImage","imageHandler","input","document","createElement","setAttribute","click","onchange","_asyncToGenerator","_regeneratorRuntime","mark","_callee","file","uploadData","response","imageUrl","quill","range","wrap","_callee$","_context","prev","next","files","FormData","append","post","params","key","sent","data","url","current","getEditor","getSelection","insertEmbed","index","setSelection","t0","console","error","stop","modules","toolbar","container","size","color","list","indent","align","handlers","image","style","height","ref","value","onChange","theme","placeholder"],"sources":["/Users/jieun/Desktop/main-project/idle/src/utils/quillEditor.js"],"sourcesContent":["import React, { useMemo, useCallback, memo, useRef, useState } from 'react';\nimport axios from 'axios';\nimport ReactQuill, { Quill } from 'react-quill';\nimport 'react-quill/dist/quill.snow.css';\n\nconst QuillEditor = memo(\n  ({ content, setContent, contents, setContents, postId, setImg }) => {\n    const quillRef = useRef(null);\n    const [previewImage, setPreviewImage] = useState(null);\n\n    const imageHandler = useCallback(() => {\n      const input = document.createElement('input');\n      input.setAttribute('type', 'file');\n      input.setAttribute('accept', 'image/*');\n      input.click();\n\n      input.onchange = async () => {\n        const file = input.files[0];\n        // setImg(prevImg => [...prevImg, file]);\n\n        const uploadData = new FormData();\n        uploadData.append('image', file);\n\n        try {\n          const response = await axios.post(\n            'https://api.imgbb.com/1/upload',\n            uploadData,\n            {\n              params: {\n                key: '8cb7f3bf3855c3503ff3954bf87159bf',\n              },\n            },\n          );\n\n          const imageUrl = response.data.data.url;\n\n          const quill = quillRef.current.getEditor();\n          const range = quill.getSelection(true);\n\n          quill.insertEmbed(range.index, 'image', imageUrl);\n          quill.setSelection(range.index + 1);\n        } catch (error) {\n          console.error('Error uploading image:', error);\n        }\n      };\n    }, []);\n\n    const modules = useMemo(\n      () => ({\n        toolbar: {\n          container: [\n            ['bold', 'italic', 'underline', 'strike', 'blockquote'],\n            [{ size: ['small', false, 'large', 'huge'] }, { color: [] }],\n            [\n              { list: 'ordered' },\n              { list: 'bullet' },\n              { indent: '-1' },\n              { indent: '+1' },\n              { align: [] },\n            ],\n            ['image'],\n          ],\n          handlers: {\n            image: imageHandler,\n          },\n        },\n      }),\n      [imageHandler],\n    );\n\n    return (\n      <ReactQuill\n        style={{ height: '400px' }}\n        ref={quillRef}\n        value={postId ? contents : content}\n        onChange={postId ? setContents : setContent}\n        modules={modules}\n        theme=\"snow\"\n        placeholder=\"내용을 입력해주세요.\"\n      />\n    );\n  },\n);\n\nexport default QuillEditor;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}