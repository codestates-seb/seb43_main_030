{"ast":null,"code":"var _jsxFileName = \"/Users/jieun/Desktop/main-project/idle/src/components/DropDownMenu.jsx\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport Swal from 'sweetalert2';\nimport { Link } from 'react-router-dom';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { setCurProfile, setAuth, setActiveIndex, setUser } from '../actions/areaFilterActions';\nimport Profile from '../images/profile.png';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction DropDownMenu(_ref) {\n  _s();\n  let {\n    setDropDown\n  } = _ref;\n  const dispatch = useDispatch();\n  const user = useSelector(state => state.user);\n  const curProfile = useSelector(state => state.curProfile);\n  const activeIndex = useSelector(state => state.activeIndex);\n  useEffect(() => {\n    axios.get(`${process.env.REACT_APP_API_URL}/api/users/profile`, {\n      headers: {\n        Authorization: localStorage.getItem('token')\n      }\n    }).then(res => {\n      dispatch(setUser(res.data));\n    });\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  const handleLogout = () => {\n    dispatch(setAuth(false));\n    localStorage.removeItem('token');\n    dispatch(setUser([]));\n    dispatch(setCurProfile({}));\n    dispatch(setActiveIndex(''));\n  };\n  function clickedProfile(profileId) {\n    axios.post(`${process.env.REACT_APP_API_URL}/api/users/profile/${profileId}`, {}, {\n      headers: {\n        Authorization: localStorage.getItem('token')\n      }\n    }).then(() => {\n      axios.get(`${process.env.REACT_APP_API_URL}/api/users/profile/currentProfile`, {\n        headers: {\n          Authorization: localStorage.getItem('token')\n        }\n      }).then(res => {\n        dispatch(setCurProfile(res.data.data));\n        setDropDown(false);\n        dispatch(setActiveIndex(res.data.data.profileId));\n      }).catch(err => {\n        if (err.response && err.response.status === 401) {\n          Swal.fire({\n            icon: 'error',\n            text: '토큰이 만료되었습니다. 재로그인 해주세요❗️',\n            confirmButtonColor: '#FFD337'\n          });\n          dispatch(setAuth(false));\n          localStorage.removeItem('token');\n        }\n      });\n    });\n  }\n\n  // function profileActive(e) {\n  //   const classList = e.target.className.split(' ');\n  //   const indexClass = classList.find(className =>\n  //     className.startsWith('profile'),\n  //   );\n  //   if (indexClass) {\n  //     const index = parseInt(indexClass.slice(-1), 10);\n  //     dispatch(setActiveIndex(index));\n  //   }\n  // }\n\n  const RenderProfile = () => {\n    return user.map(profile => {\n      const activeClass = profile.profileId === activeIndex ? 'font-bold' : '';\n      return /*#__PURE__*/_jsxDEV(\"li\", {\n        className: `profile flex items-center justify-start${profile.profileId} cursor-pointer px-8 py-12 text-14 ${activeClass} rounded-lg hover:bg-black-025`,\n        onClick: e => {\n          // profileActive(e);\n          clickedProfile(profile.profileId);\n        },\n        role: \"presentation\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex w-full justify-between\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex\",\n            children: [profile.profileId === activeIndex && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"user-profile mr-10 inline-block h-24 w-24 rounded-md\",\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: profile.imageUrl || Profile,\n                alt: \"profileimage\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 111,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 110,\n              columnNumber: 17\n            }, this), profile.name]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 11\n        }, this)\n      }, profile.profileId, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, this);\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"absolute left-0 top-[64px] z-10 flex w-226 flex-col items-start justify-center rounded-[10px] bg-white px-12 py-16 shadow-dropDownShadow onlyMobile:w-[100%]\",\n    children: [/*#__PURE__*/_jsxDEV(\"ul\", {\n      className: \"profile w-202 py-2 text-left onlyMobile:w-[100%]\",\n      children: [/*#__PURE__*/_jsxDEV(\"li\", {\n        className: \"px-8 pb-8 text-12 text-black-350\",\n        children: \"\\uD504\\uB85C\\uD544\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(RenderProfile, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-2 h-1 border-b\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      className: \"w-202 text-left onlyMobile:w-[100%]\",\n      children: [/*#__PURE__*/_jsxDEV(Link, {\n        to: `/mypage/${curProfile.profileId}`,\n        onClick: () => setDropDown(false),\n        children: /*#__PURE__*/_jsxDEV(\"li\", {\n          className: \"flex cursor-pointer items-center justify-start rounded-md px-8 py-12 text-14 hover:bg-black-025\",\n          children: \"\\uB9C8\\uC774\\uD398\\uC774\\uC9C0\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/\",\n        children: /*#__PURE__*/_jsxDEV(\"li\", {\n          role: \"presentation\",\n          className: \"cursor-pointer items-center justify-start rounded-md px-8 py-12 text-14 hover:bg-black-025\",\n          onClick: () => handleLogout(),\n          children: \"\\uB85C\\uADF8\\uC544\\uC6C3\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 123,\n    columnNumber: 5\n  }, this);\n}\n_s(DropDownMenu, \"3tir8fwufJVkW2DXcWkxarLSM1c=\", false, function () {\n  return [useDispatch, useSelector, useSelector, useSelector];\n});\n_c = DropDownMenu;\nexport default DropDownMenu;\nvar _c;\n$RefreshReg$(_c, \"DropDownMenu\");","map":{"version":3,"names":["useState","useEffect","axios","Swal","Link","useSelector","useDispatch","setCurProfile","setAuth","setActiveIndex","setUser","Profile","jsxDEV","_jsxDEV","DropDownMenu","_ref","_s","setDropDown","dispatch","user","state","curProfile","activeIndex","get","process","env","REACT_APP_API_URL","headers","Authorization","localStorage","getItem","then","res","data","handleLogout","removeItem","clickedProfile","profileId","post","catch","err","response","status","fire","icon","text","confirmButtonColor","RenderProfile","map","profile","activeClass","className","onClick","e","role","children","src","imageUrl","alt","fileName","_jsxFileName","lineNumber","columnNumber","name","to","_c","$RefreshReg$"],"sources":["/Users/jieun/Desktop/main-project/idle/src/components/DropDownMenu.jsx"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport Swal from 'sweetalert2';\nimport { Link } from 'react-router-dom';\nimport { useSelector, useDispatch } from 'react-redux';\nimport {\n  setCurProfile,\n  setAuth,\n  setActiveIndex,\n  setUser,\n} from '../actions/areaFilterActions';\nimport Profile from '../images/profile.png';\n\nfunction DropDownMenu({ setDropDown }) {\n  const dispatch = useDispatch();\n\n  const user = useSelector(state => state.user);\n  const curProfile = useSelector(state => state.curProfile);\n  const activeIndex = useSelector(state => state.activeIndex);\n\n  useEffect(() => {\n    axios\n      .get(`${process.env.REACT_APP_API_URL}/api/users/profile`, {\n        headers: {\n          Authorization: localStorage.getItem('token'),\n        },\n      })\n      .then(res => {\n        dispatch(setUser(res.data));\n      });\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const handleLogout = () => {\n    dispatch(setAuth(false));\n    localStorage.removeItem('token');\n    dispatch(setUser([]));\n    dispatch(setCurProfile({}));\n    dispatch(setActiveIndex(''));\n  };\n\n  function clickedProfile(profileId) {\n    axios\n      .post(\n        `${process.env.REACT_APP_API_URL}/api/users/profile/${profileId}`,\n        {},\n        {\n          headers: {\n            Authorization: localStorage.getItem('token'),\n          },\n        },\n      )\n      .then(() => {\n        axios\n          .get(\n            `${process.env.REACT_APP_API_URL}/api/users/profile/currentProfile`,\n            {\n              headers: {\n                Authorization: localStorage.getItem('token'),\n              },\n            },\n          )\n          .then(res => {\n            dispatch(setCurProfile(res.data.data));\n            setDropDown(false);\n            dispatch(setActiveIndex(res.data.data.profileId));\n          })\n          .catch(err => {\n            if (err.response && err.response.status === 401) {\n              Swal.fire({\n                icon: 'error',\n                text: '토큰이 만료되었습니다. 재로그인 해주세요❗️',\n                confirmButtonColor: '#FFD337',\n              });\n              dispatch(setAuth(false));\n              localStorage.removeItem('token');\n            }\n          });\n      });\n  }\n\n  // function profileActive(e) {\n  //   const classList = e.target.className.split(' ');\n  //   const indexClass = classList.find(className =>\n  //     className.startsWith('profile'),\n  //   );\n  //   if (indexClass) {\n  //     const index = parseInt(indexClass.slice(-1), 10);\n  //     dispatch(setActiveIndex(index));\n  //   }\n  // }\n\n  const RenderProfile = () => {\n    return user.map(profile => {\n      const activeClass = profile.profileId === activeIndex ? 'font-bold' : '';\n\n      return (\n        <li\n          className={`profile flex items-center justify-start${profile.profileId} cursor-pointer px-8 py-12 text-14 ${activeClass} rounded-lg hover:bg-black-025`}\n          onClick={e => {\n            // profileActive(e);\n            clickedProfile(profile.profileId);\n          }}\n          role=\"presentation\"\n          key={profile.profileId}\n        >\n          <div className=\"flex w-full justify-between\">\n            <div className=\"flex\">\n              {profile.profileId === activeIndex && (\n                <div className=\"user-profile mr-10 inline-block h-24 w-24 rounded-md\">\n                  <img src={profile.imageUrl || Profile} alt=\"profileimage\" />\n                </div>\n              )}\n              {profile.name}\n            </div>\n          </div>\n        </li>\n      );\n    });\n  };\n\n  return (\n    <div className=\"absolute left-0 top-[64px] z-10 flex w-226 flex-col items-start justify-center rounded-[10px] bg-white px-12 py-16 shadow-dropDownShadow onlyMobile:w-[100%]\">\n      <ul className=\"profile w-202 py-2 text-left onlyMobile:w-[100%]\">\n        <li className=\"px-8 pb-8 text-12 text-black-350\">프로필</li>\n        <RenderProfile />\n        <div className=\"mt-2 h-1 border-b\" />\n      </ul>\n      <ul className=\"w-202 text-left onlyMobile:w-[100%]\">\n        <Link\n          to={`/mypage/${curProfile.profileId}`}\n          onClick={() => setDropDown(false)}\n        >\n          <li className=\"flex cursor-pointer items-center justify-start rounded-md px-8 py-12 text-14 hover:bg-black-025\">\n            마이페이지\n          </li>\n        </Link>\n        <Link to=\"/\">\n          <li\n            role=\"presentation\"\n            className=\"cursor-pointer items-center justify-start rounded-md px-8 py-12 text-14 hover:bg-black-025\"\n            onClick={() => handleLogout()}\n          >\n            로그아웃\n          </li>\n        </Link>\n      </ul>\n    </div>\n  );\n}\n\nexport default DropDownMenu;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}