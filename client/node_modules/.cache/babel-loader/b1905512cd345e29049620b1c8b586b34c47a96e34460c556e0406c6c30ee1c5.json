{"ast":null,"code":"import _slicedToArray from\"/Users/jieun/Desktop/main-project/idle/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{GoogleMap,useJsApiLoader,MarkerF,InfoWindowF}from'@react-google-maps/api';import{useDispatch,useSelector}from'react-redux';import{Link}from'react-router-dom';import{useState,useCallback,memo,useEffect}from'react';import{setCenter}from'../actions/areaFilterActions';import PinOn from'../images/pin-on.png';import MapCard from'../components/Card/MapCard';import Button from'../components/Button/Button';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var containerStyle={width:'100%',height:'100vh'};var myStyles=[{featureType:'poi',elementType:'labels',stylers:[{visibility:'off'}]}];function Map(){var areaFilter=useSelector(function(state){return state.areaFilter;});var center=useSelector(function(state){return state.center;});var kinderGartens=useSelector(function(state){return state.kinderGartens;});var searchValue=useSelector(function(state){return state.searchValue;});var centerArr=[{lat:37.568177,lng:126.992217},{lat:37.523474,lng:126.844036},{lat:37.495092,lng:126.931558},{lat:37.515894,lng:127.070571},{lat:37.589416,lng:126.92703},{lat:37.648563,lng:127.03758},{lat:37.533099,lng:126.979087},{lat:37.583792,lng:127.081658}];var _useState=useState(null),_useState2=_slicedToArray(_useState,2),map=_useState2[0],setMap=_useState2[1];var dispatch=useDispatch();var _useJsApiLoader=useJsApiLoader({id:'google-map-script',googleMapsApiKey:process.env.REACT_APP_GOOGLE_MAP_API_KEY},[center]),isLoaded=_useJsApiLoader.isLoaded;var getCenterValue=function getCenterValue(areaFilter){dispatch(setCenter(centerArr[areaFilter]));if(searchValue){dispatch(setCenter(centerArr[0]));}};useEffect(function(){getCenterValue(areaFilter);// eslint-disable-next-line react-hooks/exhaustive-deps\n},[areaFilter]);var onLoad=useCallback(function callback(mapValue){var centerLatLng=new window.google.maps.LatLng(center.lat,center.lng);var bounds=new window.google.maps.LatLngBounds(centerLatLng);var circle=new window.google.maps.Circle({center:centerLatLng,radius:areaFilter===0?10000:5000// 500m 반경\n});bounds.union(circle.getBounds());mapValue.fitBounds(bounds);},[center,areaFilter]);var onUnmount=useCallback(function callback(){setMap(null);},[]);var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),clickedMarker=_useState4[0],setClickedMarker=_useState4[1];var handleMarkerClick=function handleMarkerClick(markerValue){setClickedMarker(markerValue);};return isLoaded?/*#__PURE__*/_jsx(\"div\",{className:\"w-[100vw]\",children:/*#__PURE__*/_jsxs(GoogleMap,{mapContainerStyle:containerStyle,center:center,zoom:12,onLoad:onLoad,onUnmount:onUnmount,options:{disableDefaultUI:true,styles:myStyles},children:[kinderGartens&&kinderGartens.map(function(kinderGarten){return/*#__PURE__*/_jsx(MarkerF,{position:{lat:kinderGarten.latitude,lng:kinderGarten.longitude},onClick:function onClick(){return handleMarkerClick(kinderGarten);},icon:{url:PinOn,scaledSize:new window.google.maps.Size(56,56)},children:clickedMarker&&clickedMarker.kindergartenId===kinderGarten.kindergartenId&&/*#__PURE__*/_jsx(InfoWindowF,{position:{lat:clickedMarker.lat,lng:clickedMarker.lng},onCloseClick:function onCloseClick(){return setClickedMarker(null);},children:/*#__PURE__*/_jsx(\"div\",{className:\"flex-center onlyMobile:h-220 onlyMobile:w-226 onlyMini:w-160\",style:{backgroundColor:'white'},children:/*#__PURE__*/_jsx(MapCard,{name:kinderGarten.name,ratedReviewsAvg:kinderGarten.ratedReviewsAvg,ratedReviewsCount:kinderGarten.ratedReviewsCount,id:kinderGarten.kindergartenId,imageUrl:kinderGarten.imageUrl})})})},kinderGarten.kindergartenId);}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-center fixed bottom-10 left-0 z-10 w-[100vw]\",children:/*#__PURE__*/_jsx(Link,{to:\"/\",children:/*#__PURE__*/_jsx(Button,{className:\"color-black z-10 flex h-50 w-190 items-center justify-around\",icon:\"list\",children:\"\\uB9AC\\uC2A4\\uD2B8\\uBCF4\\uAE30\"})})})]})}):/*#__PURE__*/_jsx(_Fragment,{children:\" \"});}export default/*#__PURE__*/memo(Map);","map":{"version":3,"names":["GoogleMap","useJsApiLoader","MarkerF","InfoWindowF","useDispatch","useSelector","Link","useState","useCallback","memo","useEffect","setCenter","PinOn","MapCard","Button","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","containerStyle","width","height","myStyles","featureType","elementType","stylers","visibility","Map","areaFilter","state","center","kinderGartens","searchValue","centerArr","lat","lng","_useState","_useState2","_slicedToArray","map","setMap","dispatch","_useJsApiLoader","id","googleMapsApiKey","process","env","REACT_APP_GOOGLE_MAP_API_KEY","isLoaded","getCenterValue","onLoad","callback","mapValue","centerLatLng","window","google","maps","LatLng","bounds","LatLngBounds","circle","Circle","radius","union","getBounds","fitBounds","onUnmount","_useState3","_useState4","clickedMarker","setClickedMarker","handleMarkerClick","markerValue","className","children","mapContainerStyle","zoom","options","disableDefaultUI","styles","kinderGarten","position","latitude","longitude","onClick","icon","url","scaledSize","Size","kindergartenId","onCloseClick","style","backgroundColor","name","ratedReviewsAvg","ratedReviewsCount","imageUrl","to"],"sources":["/Users/jieun/Desktop/main-project/idle/src/pages/Map.jsx"],"sourcesContent":["import {\n  GoogleMap,\n  useJsApiLoader,\n  MarkerF,\n  InfoWindowF,\n} from '@react-google-maps/api';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport { useState, useCallback, memo, useEffect } from 'react';\nimport { setCenter } from '../actions/areaFilterActions';\nimport PinOn from '../images/pin-on.png';\nimport MapCard from '../components/Card/MapCard';\nimport Button from '../components/Button/Button';\n\nconst containerStyle = {\n  width: '100%',\n  height: '100vh',\n};\n\nconst myStyles = [\n  {\n    featureType: 'poi',\n    elementType: 'labels',\n    stylers: [{ visibility: 'off' }],\n  },\n];\n\nfunction Map() {\n  const areaFilter = useSelector(state => state.areaFilter);\n  const center = useSelector(state => state.center);\n  const kinderGartens = useSelector(state => state.kinderGartens);\n  const searchValue = useSelector(state => state.searchValue);\n  const centerArr = [\n    { lat: 37.568177, lng: 126.992217 },\n    {\n      lat: 37.523474,\n      lng: 126.844036,\n    },\n    {\n      lat: 37.495092,\n      lng: 126.931558,\n    },\n    {\n      lat: 37.515894,\n      lng: 127.070571,\n    },\n    {\n      lat: 37.589416,\n      lng: 126.92703,\n    },\n    {\n      lat: 37.648563,\n      lng: 127.03758,\n    },\n    {\n      lat: 37.533099,\n      lng: 126.979087,\n    },\n    {\n      lat: 37.583792,\n      lng: 127.081658,\n    },\n  ];\n\n  const [map, setMap] = useState(null);\n  const dispatch = useDispatch();\n\n  const { isLoaded } = useJsApiLoader(\n    {\n      id: 'google-map-script',\n      googleMapsApiKey: process.env.REACT_APP_GOOGLE_MAP_API_KEY,\n    },\n    [center],\n  );\n\n  const getCenterValue = areaFilter => {\n    dispatch(setCenter(centerArr[areaFilter]));\n    if (searchValue) {\n      dispatch(setCenter(centerArr[0]));\n    }\n  };\n\n  useEffect(() => {\n    getCenterValue(areaFilter);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [areaFilter]);\n\n  const onLoad = useCallback(\n    function callback(mapValue) {\n      const centerLatLng = new window.google.maps.LatLng(\n        center.lat,\n        center.lng,\n      );\n      const bounds = new window.google.maps.LatLngBounds(centerLatLng);\n      const circle = new window.google.maps.Circle({\n        center: centerLatLng,\n        radius: areaFilter === 0 ? 10000 : 5000, // 500m 반경\n      });\n      bounds.union(circle.getBounds());\n      mapValue.fitBounds(bounds);\n    },\n    [center, areaFilter],\n  );\n\n  const onUnmount = useCallback(function callback() {\n    setMap(null);\n  }, []);\n\n  const [clickedMarker, setClickedMarker] = useState(null);\n\n  const handleMarkerClick = markerValue => {\n    setClickedMarker(markerValue);\n  };\n\n  return isLoaded ? (\n    <div className=\"w-[100vw]\">\n      <GoogleMap\n        mapContainerStyle={containerStyle}\n        center={center}\n        zoom={12}\n        onLoad={onLoad}\n        onUnmount={onUnmount}\n        options={{ disableDefaultUI: true, styles: myStyles }}\n      >\n        {kinderGartens &&\n          kinderGartens.map(kinderGarten => {\n            return (\n              <MarkerF\n                key={kinderGarten.kindergartenId}\n                position={{\n                  lat: kinderGarten.latitude,\n                  lng: kinderGarten.longitude,\n                }}\n                onClick={() => handleMarkerClick(kinderGarten)}\n                icon={{\n                  url: PinOn,\n                  scaledSize: new window.google.maps.Size(56, 56),\n                }}\n              >\n                {clickedMarker &&\n                  clickedMarker.kindergartenId ===\n                    kinderGarten.kindergartenId && (\n                    <InfoWindowF\n                      position={{\n                        lat: clickedMarker.lat,\n                        lng: clickedMarker.lng,\n                      }}\n                      onCloseClick={() => setClickedMarker(null)}\n                    >\n                      <div\n                        className=\"flex-center onlyMobile:h-220 onlyMobile:w-226 onlyMini:w-160\"\n                        style={{ backgroundColor: 'white' }}\n                      >\n                        <MapCard\n                          name={kinderGarten.name}\n                          ratedReviewsAvg={kinderGarten.ratedReviewsAvg}\n                          ratedReviewsCount={kinderGarten.ratedReviewsCount}\n                          id={kinderGarten.kindergartenId}\n                          imageUrl={kinderGarten.imageUrl}\n                        />\n                      </div>\n                    </InfoWindowF>\n                  )}\n              </MarkerF>\n            );\n          })}\n        <div className=\"flex-center fixed bottom-10 left-0 z-10 w-[100vw]\">\n          <Link to=\"/\">\n            <Button\n              className=\"color-black z-10 flex h-50 w-190 items-center justify-around\"\n              icon=\"list\"\n            >\n              리스트보기\n            </Button>\n          </Link>\n        </div>\n      </GoogleMap>\n    </div>\n  ) : (\n    <> </>\n  );\n}\n\nexport default memo(Map);\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}