{"ast":null,"code":"import{useState}from'react';import axios from'axios';import{Link}from'react-router-dom';import{useSelector,useDispatch}from'react-redux';import{setCurUser,setCurProfile,setAuth,setActiveIndex,setUser}from'../actions/areaFilterActions';import Profile from'../images/profile.png';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function DropDownMenu(_ref){var setDropDown=_ref.setDropDown;var user=useSelector(function(state){return state.user;});var curUser=useSelector(function(state){return state.curUser;});var activeIndex=useSelector(function(state){return state.activeIndex;});// const [selectProfile, setSelectProfile] = useState(curUser);\nvar dispatch=useDispatch();var handleLogout=function handleLogout(){dispatch(setAuth(false));localStorage.removeItem('token');dispatch(setCurUser({}));dispatch(setUser([]));dispatch(setCurProfile({}));dispatch(setActiveIndex(''));};function clickedProfile(idx,id){dispatch(setCurUser(user[idx]));dispatch(setCurProfile(user[idx]));axios.get(\"\".concat(process.env.REACT_APP_API_URL,\"/users/profile/\").concat(id),{headers:{Authorization:localStorage.getItem('token')}}).then(function(res){dispatch(setCurProfile(res.data.data));setDropDown(false);dispatch(setActiveIndex(idx));});}function profileActive(e){var classList=e.target.className.split(' ');var indexClass=classList.find(function(className){return className.startsWith('profile');});if(indexClass){var index=parseInt(indexClass.slice(-1),10);dispatch(setActiveIndex(index));}}var RenderProfile=function RenderProfile(){return user.map(function(profile,idx){var activeClass=Number(activeIndex)===idx?'font-bold':'';return/*#__PURE__*/_jsx(\"li\",{className:\"profile flex items-center justify-start\".concat(idx,\" cursor-pointer px-8 py-12 text-14 \").concat(activeClass,\" rounded-lg hover:bg-black-025\"),onClick:function onClick(e){profileActive(e);clickedProfile(idx,profile.profileId);},role:\"presentation\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex w-full justify-between\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex\",children:[Number(activeIndex)===idx&&/*#__PURE__*/_jsx(\"div\",{className:\"user-profile mr-10 inline-block h-24 w-24 rounded-md\",children:/*#__PURE__*/_jsx(\"img\",{src:profile.imageUrl||Profile,alt:\"profileimage\"})}),profile.name]})})},profile.profileId);});};return/*#__PURE__*/_jsxs(\"div\",{className:\"absolute left-0 top-[64px] z-10 flex w-226 flex-col items-start justify-center rounded-[10px] bg-white px-12 py-16 shadow-dropDownShadow onlyMobile:w-[100%]\",children:[/*#__PURE__*/_jsxs(\"ul\",{className:\"profile w-202 py-2 text-left onlyMobile:w-[100%]\",children:[/*#__PURE__*/_jsx(\"li\",{className:\"px-8 pb-8 text-12 text-black-350\",children:\"\\uD504\\uB85C\\uD544\"}),/*#__PURE__*/_jsx(RenderProfile,{}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-2 h-1 border-b\"})]}),/*#__PURE__*/_jsxs(\"ul\",{className:\"w-202 text-left onlyMobile:w-[100%]\",children:[/*#__PURE__*/_jsx(Link,{to:\"/mypage/\".concat(curUser.profileId),onClick:function onClick(){return setDropDown(false);},children:/*#__PURE__*/_jsx(\"li\",{className:\"flex cursor-pointer items-center justify-start rounded-md px-8 py-12 text-14 hover:bg-black-025\",children:\"\\uB9C8\\uC774\\uD398\\uC774\\uC9C0\"})}),/*#__PURE__*/_jsx(Link,{to:\"/\",children:/*#__PURE__*/_jsx(\"li\",{role:\"presentation\",className:\"cursor-pointer items-center justify-start rounded-md px-8 py-12 text-14 hover:bg-black-025\",onClick:function onClick(){return handleLogout();},children:\"\\uB85C\\uADF8\\uC544\\uC6C3\"})})]})]});}export default DropDownMenu;","map":{"version":3,"names":["useState","axios","Link","useSelector","useDispatch","setCurUser","setCurProfile","setAuth","setActiveIndex","setUser","Profile","jsx","_jsx","jsxs","_jsxs","DropDownMenu","_ref","setDropDown","user","state","curUser","activeIndex","dispatch","handleLogout","localStorage","removeItem","clickedProfile","idx","id","get","concat","process","env","REACT_APP_API_URL","headers","Authorization","getItem","then","res","data","profileActive","e","classList","target","className","split","indexClass","find","startsWith","index","parseInt","slice","RenderProfile","map","profile","activeClass","Number","onClick","profileId","role","children","src","imageUrl","alt","name","to"],"sources":["/Users/jieun/Desktop/main-project/idle/src/components/DropDownMenu.jsx"],"sourcesContent":["import { useState } from 'react';\nimport axios from 'axios';\nimport { Link } from 'react-router-dom';\nimport { useSelector, useDispatch } from 'react-redux';\nimport {\n  setCurUser,\n  setCurProfile,\n  setAuth,\n  setActiveIndex,\n  setUser,\n} from '../actions/areaFilterActions';\nimport Profile from '../images/profile.png';\n\nfunction DropDownMenu({ setDropDown }) {\n  const user = useSelector(state => state.user);\n  const curUser = useSelector(state => state.curUser);\n  const activeIndex = useSelector(state => state.activeIndex);\n  // const [selectProfile, setSelectProfile] = useState(curUser);\n\n  const dispatch = useDispatch();\n\n  const handleLogout = () => {\n    dispatch(setAuth(false));\n    localStorage.removeItem('token');\n    dispatch(setCurUser({}));\n    dispatch(setUser([]));\n    dispatch(setCurProfile({}));\n    dispatch(setActiveIndex(''));\n  };\n\n  function clickedProfile(idx, id) {\n    dispatch(setCurUser(user[idx]));\n    dispatch(setCurProfile(user[idx]));\n    axios\n      .get(`${process.env.REACT_APP_API_URL}/users/profile/${id}`, {\n        headers: {\n          Authorization: localStorage.getItem('token'),\n        },\n      })\n      .then(res => {\n        dispatch(setCurProfile(res.data.data));\n        setDropDown(false);\n        dispatch(setActiveIndex(idx));\n      });\n  }\n\n  function profileActive(e) {\n    const classList = e.target.className.split(' ');\n    const indexClass = classList.find(className =>\n      className.startsWith('profile'),\n    );\n    if (indexClass) {\n      const index = parseInt(indexClass.slice(-1), 10);\n      dispatch(setActiveIndex(index));\n    }\n  }\n\n  const RenderProfile = () => {\n    return user.map((profile, idx) => {\n      const activeClass = Number(activeIndex) === idx ? 'font-bold' : '';\n\n      return (\n        <li\n          className={`profile flex items-center justify-start${idx} cursor-pointer px-8 py-12 text-14 ${activeClass} rounded-lg hover:bg-black-025`}\n          onClick={e => {\n            profileActive(e);\n            clickedProfile(idx, profile.profileId);\n          }}\n          role=\"presentation\"\n          key={profile.profileId}\n        >\n          <div className=\"flex w-full justify-between\">\n            <div className=\"flex\">\n              {Number(activeIndex) === idx && (\n                <div className=\"user-profile mr-10 inline-block h-24 w-24 rounded-md\">\n                  <img src={profile.imageUrl || Profile} alt=\"profileimage\" />\n                </div>\n              )}\n              {profile.name}\n            </div>\n          </div>\n        </li>\n      );\n    });\n  };\n\n  return (\n    <div className=\"absolute left-0 top-[64px] z-10 flex w-226 flex-col items-start justify-center rounded-[10px] bg-white px-12 py-16 shadow-dropDownShadow onlyMobile:w-[100%]\">\n      <ul className=\"profile w-202 py-2 text-left onlyMobile:w-[100%]\">\n        <li className=\"px-8 pb-8 text-12 text-black-350\">프로필</li>\n        <RenderProfile />\n        <div className=\"mt-2 h-1 border-b\" />\n      </ul>\n      <ul className=\"w-202 text-left onlyMobile:w-[100%]\">\n        <Link\n          to={`/mypage/${curUser.profileId}`}\n          onClick={() => setDropDown(false)}\n        >\n          <li className=\"flex cursor-pointer items-center justify-start rounded-md px-8 py-12 text-14 hover:bg-black-025\">\n            마이페이지\n          </li>\n        </Link>\n        <Link to=\"/\">\n          <li\n            role=\"presentation\"\n            className=\"cursor-pointer items-center justify-start rounded-md px-8 py-12 text-14 hover:bg-black-025\"\n            onClick={() => handleLogout()}\n          >\n            로그아웃\n          </li>\n        </Link>\n      </ul>\n    </div>\n  );\n}\n\nexport default DropDownMenu;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}