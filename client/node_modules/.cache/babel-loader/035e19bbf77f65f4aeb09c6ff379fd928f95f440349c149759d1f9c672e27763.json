{"ast":null,"code":"import _slicedToArray from\"/Users/jieun/Desktop/main-project/idle/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect,useRef}from'react';import{useInView}from'react-intersection-observer';import{useDispatch,useSelector}from'react-redux';import axios from'axios';import{PulseLoader}from'react-spinners';import{Link}from'react-router-dom';import{setKinderGartens}from'../actions/areaFilterActions';import NoList from'../images/perpett-nolist.png';import MainCard from'../components/Card/MainCard';import Button from'../components/Button/Button';import InputSelectBox from'../components/Input/InputSelectBox';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Main(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isPending=_useState2[0],setIsPending=_useState2[1];var _useInView=useInView(),_useInView2=_slicedToArray(_useInView,2),ref=_useInView2[0],inView=_useInView2[1];var page=useRef(8);var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),print=_useState4[0],setPrint=_useState4[1];var dispatch=useDispatch();var areaFilter=useSelector(function(state){return state.areaFilter;});var kinderGartens=useSelector(function(state){return state.kinderGartens;});var searchValue=useSelector(function(state){return state.searchValue;});var user=useSelector(function(state){return state.user;});var curUser=useSelector(function(state){return state.curUser;});var curProfile=useSelector(function(state){return state.curProfile;});useEffect(function(){var url=\"\";if(searchValue){url=\"\".concat(process.env.REACT_APP_API_URL,\"/api/kindergarten/name/\").concat(searchValue);}else{url=\"\".concat(process.env.REACT_APP_API_URL,\"/api/kindergarten/loc/\").concat(areaFilter);}axios.get(url).then(function(response){dispatch(setKinderGartens(response.data));setIsPending(true);}).catch(function(error){console.log(error);});},[areaFilter,searchValue,dispatch]);useEffect(function(){var timerId;if(isPending){if(kinderGartens.length===0){setPrint([]);}else{setPrint(kinderGartens.slice(0,page.current));}if(inView){timerId=setTimeout(function(){page.current+=8;setPrint(kinderGartens.slice(0,page.current));},150);}}return function(){return clearTimeout(timerId);};},[inView,isPending,kinderGartens]);return/*#__PURE__*/_jsxs(\"div\",{className:\"flex-center relative flex-col\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-center mt-80 w-[100%] max-w-[1440px] flex-col px-80 onlyMobile:px-24\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mt-56 h-304 w-[100%] rounded-2xl bg-yellow-500\",children:\"\\uC548\\uB0D0\\uC138\\uC5EC\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-24 mt-48 flex w-[100%] justify-between text-28 font-bold onlyMobile:flex-col\",children:[/*#__PURE__*/_jsx(\"span\",{children:searchValue?\"\\\"\".concat(searchValue,\"\\\"\\uC5D0 \\uB300\\uD55C \\uAC80\\uC0C9\\uACB0\\uACFC\"):'유치원 리스트'}),/*#__PURE__*/_jsx(InputSelectBox,{options:\"\\uC804\\uCCB4\\uBCF4\\uAE30, \\uAC15\\uC11C \\xB7 \\uAD6C\\uB85C \\xB7 \\uC591\\uCC9C, \\uAD00\\uC545 \\xB7 \\uAE08\\uCC9C \\xB7 \\uB3D9\\uC791 \\xB7 \\uC601\\uB4F1\\uD3EC, \\uAC15\\uB0A8 \\xB7 \\uAC15\\uB3D9 \\xB7 \\uC11C\\uCD08 \\xB7 \\uC1A1\\uD30C, \\uB9C8\\uD3EC \\xB7 \\uC740\\uD3C9 \\xB7 \\uC11C\\uB300\\uBB38, \\uAC15\\uBD81 \\xB7 \\uB178\\uC6D0 \\xB7 \\uB3C4\\uBD09 \\xB7 \\uC131\\uBD81, \\uC6A9\\uC0B0 \\xB7 \\uC131\\uB3D9 \\xB7 \\uC885\\uB85C \\xB7 \\uC911\\uAD6C, \\uAD11\\uC9C4 \\xB7 \\uB3D9\\uB300\\uBB38 \\xB7 \\uC911\\uB791\",width:\"min-w-260 onlyMobile:w-full onlyMobile:mt-10\",placeholder:\"\\uC804\\uCCB4\\uBCF4\\uAE30\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid w-[100%] grid-cols-cardGrid gap-x-[20px]\",children:isPending?print.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"flex-center h-640 flex-col\",children:[/*#__PURE__*/_jsx(\"img\",{src:NoList,alt:\"NoList\",className:\"mb-16 h-160 w-160\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-18 text-black-350\",children:searchValue?\"\\\"\".concat(searchValue,\"\\\"\\uC5D0 \\uB300\\uD55C \\uAC80\\uC0C9\\uACB0\\uACFC\\uAC00 \\uC5C6\\uC5B4\\uC694...\"):'여기는 유치원이 없어요...'})]}):print.map(function(kinderGarten){return/*#__PURE__*/_jsx(MainCard,{name:kinderGarten.name,ratedReviewsAvg:kinderGarten.ratedReviewsAvg,ratedReviewsCount:kinderGarten.ratedReviewsCount,locations:kinderGarten.locations,id:kinderGarten.kindergartenId,imageUrl:kinderGarten.imageUrl},kinderGarten.kindergartenId);}):/*#__PURE__*/_jsx(\"div\",{className:\"flex-center h-[50vh] w-[100%]\",children:/*#__PURE__*/_jsx(PulseLoader,{color:\"#FFD337\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-center sticky bottom-10 left-0 w-[100%] text-white\",children:/*#__PURE__*/_jsx(Link,{to:\"/map\",children:/*#__PURE__*/_jsx(Button,{className:\"color-black flex-center z-20 h-50 w-190\",icon:\"map\",children:\"\\uC9C0\\uB3C4\\uBCF4\\uAE30\"})})})]}),isPending&&page.current<kinderGartens.length?/*#__PURE__*/_jsx(\"div\",{ref:ref}):null]});}export default Main;","map":{"version":3,"names":["useState","useEffect","useRef","useInView","useDispatch","useSelector","axios","PulseLoader","Link","setKinderGartens","NoList","MainCard","Button","InputSelectBox","jsx","_jsx","jsxs","_jsxs","Main","_useState","_useState2","_slicedToArray","isPending","setIsPending","_useInView","_useInView2","ref","inView","page","_useState3","_useState4","print","setPrint","dispatch","areaFilter","state","kinderGartens","searchValue","user","curUser","curProfile","url","concat","process","env","REACT_APP_API_URL","get","then","response","data","catch","error","console","log","timerId","length","slice","current","setTimeout","clearTimeout","className","children","options","width","placeholder","src","alt","map","kinderGarten","name","ratedReviewsAvg","ratedReviewsCount","locations","id","kindergartenId","imageUrl","color","to","icon"],"sources":["/Users/jieun/Desktop/main-project/idle/src/pages/Main.jsx"],"sourcesContent":["import { useState, useEffect, useRef } from 'react';\nimport { useInView } from 'react-intersection-observer';\nimport { useDispatch, useSelector } from 'react-redux';\nimport axios from 'axios';\nimport { PulseLoader } from 'react-spinners';\nimport { Link } from 'react-router-dom';\nimport { setKinderGartens } from '../actions/areaFilterActions';\nimport NoList from '../images/perpett-nolist.png';\nimport MainCard from '../components/Card/MainCard';\nimport Button from '../components/Button/Button';\nimport InputSelectBox from '../components/Input/InputSelectBox';\n\nfunction Main() {\n  const [isPending, setIsPending] = useState(false);\n\n  const [ref, inView] = useInView();\n\n  const page = useRef(8);\n  const [print, setPrint] = useState([]);\n  const dispatch = useDispatch();\n\n  const areaFilter = useSelector(state => state.areaFilter);\n  const kinderGartens = useSelector(state => state.kinderGartens);\n  const searchValue = useSelector(state => state.searchValue);\n  const user = useSelector(state => state.user);\n  const curUser = useSelector(state => state.curUser);\n  const curProfile = useSelector(state => state.curProfile);\n\n  useEffect(() => {\n    let url = ``;\n    if (searchValue) {\n      url = `${process.env.REACT_APP_API_URL}/api/kindergarten/name/${searchValue}`;\n    } else {\n      url = `${process.env.REACT_APP_API_URL}/api/kindergarten/loc/${areaFilter}`;\n    }\n    axios\n      .get(url)\n      .then(response => {\n        dispatch(setKinderGartens(response.data));\n        setIsPending(true);\n      })\n      .catch(error => {\n        console.log(error);\n      });\n  }, [areaFilter, searchValue, dispatch]);\n\n  useEffect(() => {\n    let timerId;\n    if (isPending) {\n      if (kinderGartens.length === 0) {\n        setPrint([]);\n      } else {\n        setPrint(kinderGartens.slice(0, page.current));\n      }\n      if (inView) {\n        timerId = setTimeout(() => {\n          page.current += 8;\n          setPrint(kinderGartens.slice(0, page.current));\n        }, 150);\n      }\n    }\n\n    return () => clearTimeout(timerId);\n  }, [inView, isPending, kinderGartens]);\n\n  return (\n    <div className=\"flex-center relative flex-col\">\n      <div className=\"flex-center mt-80 w-[100%] max-w-[1440px] flex-col px-80 onlyMobile:px-24\">\n        <div className=\"mt-56 h-304 w-[100%] rounded-2xl bg-yellow-500\">\n          안냐세여\n        </div>\n        <div className=\"mb-24 mt-48 flex w-[100%] justify-between text-28 font-bold onlyMobile:flex-col\">\n          <span>\n            {searchValue ? `\"${searchValue}\"에 대한 검색결과` : '유치원 리스트'}\n          </span>\n          <InputSelectBox\n            options=\"전체보기, 강서 · 구로 · 양천, 관악 · 금천 · 동작 · 영등포, 강남 · 강동 · 서초 · 송파, 마포 · 은평 · 서대문, 강북 · 노원 · 도봉 · 성북, 용산 · 성동 · 종로 · 중구, 광진 · 동대문 · 중랑\"\n            width=\"min-w-260 onlyMobile:w-full onlyMobile:mt-10\"\n            placeholder=\"전체보기\"\n          />\n        </div>\n        <div className=\"grid w-[100%] grid-cols-cardGrid gap-x-[20px]\">\n          {isPending ? (\n            print.length === 0 ? (\n              <div className=\"flex-center h-640 flex-col\">\n                <img src={NoList} alt=\"NoList\" className=\"mb-16 h-160 w-160\" />\n                <span className=\"text-18 text-black-350\">\n                  {searchValue\n                    ? `\"${searchValue}\"에 대한 검색결과가 없어요...`\n                    : '여기는 유치원이 없어요...'}\n                </span>\n              </div>\n            ) : (\n              print.map(kinderGarten => {\n                return (\n                  <MainCard\n                    key={kinderGarten.kindergartenId}\n                    name={kinderGarten.name}\n                    ratedReviewsAvg={kinderGarten.ratedReviewsAvg}\n                    ratedReviewsCount={kinderGarten.ratedReviewsCount}\n                    locations={kinderGarten.locations}\n                    id={kinderGarten.kindergartenId}\n                    imageUrl={kinderGarten.imageUrl}\n                  />\n                );\n              })\n            )\n          ) : (\n            <div className=\"flex-center h-[50vh] w-[100%]\">\n              <PulseLoader color=\"#FFD337\" />\n            </div>\n          )}\n        </div>\n        <div className=\"flex-center sticky bottom-10 left-0 w-[100%] text-white\">\n          <Link to=\"/map\">\n            <Button\n              className=\"color-black flex-center z-20 h-50 w-190\"\n              icon=\"map\"\n            >\n              지도보기\n            </Button>\n          </Link>\n        </div>\n      </div>\n      {isPending && page.current < kinderGartens.length ? (\n        <div ref={ref} />\n      ) : null}\n    </div>\n  );\n}\n\nexport default Main;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}