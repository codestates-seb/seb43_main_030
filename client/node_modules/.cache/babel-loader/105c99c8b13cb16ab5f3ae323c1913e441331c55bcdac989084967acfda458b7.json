{"ast":null,"code":"var _jsxFileName = \"/Users/jieun/Desktop/main-project/idle/src/pages/OauthLogin.jsx\",\n  _s = $RefreshSig$();\nimport { useNavigate } from 'react-router-dom';\nimport { PulseLoader } from 'react-spinners';\nimport { useDispatch, useSelector } from 'react-redux';\nimport axios from 'axios';\nimport Swal from 'sweetalert2';\nimport { setAuth,\n// setCurUser,\nsetUser, setCurProfile, setActiveIndex } from '../actions/areaFilterActions';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction OauthLogin() {\n  _s();\n  const navi = useNavigate();\n  const dispatch = useDispatch();\n  const url = new URL(window.location.href);\n  const authorization = url.searchParams.get('Authorization');\n  const refresh = url.searchParams.get('Refresh');\n  const getUsers = () => {\n    if (localStorage.getItem('token')) {\n      axios.get(`${process.env.REACT_APP_API_URL}/api/users/profile`, {\n        headers: {\n          Authorization: localStorage.getItem('token')\n        }\n      }).then(res => {\n        dispatch(setUser(res.data));\n        dispatch(setCurProfile(res.data[0]));\n        axios.get(`${process.env.REACT_APP_API_URL}/api/users/profile/currentProfile`, {\n          headers: {\n            Authorization: localStorage.getItem('token')\n          }\n        }).then(res => {\n          dispatch(setCurProfile(res.data.data));\n          dispatch(setActiveIndex(res.data.data.profileId));\n          navi('/');\n        });\n      }).catch(err => {\n        console.log(err);\n      });\n    }\n  };\n  if (authorization) {\n    dispatch(setAuth(true));\n    localStorage.setItem('token', authorization);\n    localStorage.setItem('tokenRefresh', refresh);\n    getUsers();\n  } else if (!authorization) {\n    navi('/login');\n    Swal.fire({\n      icon: 'error',\n      text: '로그인에 실패했습니다.',\n      confirmButtonColor: '#FFD337'\n    });\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex-center h-[50vh] w-[100%]\",\n    children: /*#__PURE__*/_jsxDEV(PulseLoader, {\n      color: \"#FFD337\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 5\n  }, this);\n}\n_s(OauthLogin, \"xzu0yggEL+wpBS0MCfWB3syvNkM=\", false, function () {\n  return [useNavigate, useDispatch];\n});\n_c = OauthLogin;\nexport default OauthLogin;\nvar _c;\n$RefreshReg$(_c, \"OauthLogin\");","map":{"version":3,"names":["useNavigate","PulseLoader","useDispatch","useSelector","axios","Swal","setAuth","setUser","setCurProfile","setActiveIndex","jsxDEV","_jsxDEV","OauthLogin","_s","navi","dispatch","url","URL","window","location","href","authorization","searchParams","get","refresh","getUsers","localStorage","getItem","process","env","REACT_APP_API_URL","headers","Authorization","then","res","data","profileId","catch","err","console","log","setItem","fire","icon","text","confirmButtonColor","className","children","color","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/jieun/Desktop/main-project/idle/src/pages/OauthLogin.jsx"],"sourcesContent":["import { useNavigate } from 'react-router-dom';\nimport { PulseLoader } from 'react-spinners';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport axios from 'axios';\nimport Swal from 'sweetalert2';\nimport {\n  setAuth,\n  // setCurUser,\n  setUser,\n  setCurProfile,\n  setActiveIndex,\n} from '../actions/areaFilterActions';\n\nfunction OauthLogin() {\n  const navi = useNavigate();\n  const dispatch = useDispatch();\n\n  const url = new URL(window.location.href);\n  const authorization = url.searchParams.get('Authorization');\n  const refresh = url.searchParams.get('Refresh');\n\n  const getUsers = () => {\n    if (localStorage.getItem('token')) {\n      axios\n        .get(`${process.env.REACT_APP_API_URL}/api/users/profile`, {\n          headers: {\n            Authorization: localStorage.getItem('token'),\n          },\n        })\n        .then(res => {\n          dispatch(setUser(res.data));\n          dispatch(setCurProfile(res.data[0]));\n          axios\n            .get(\n              `${process.env.REACT_APP_API_URL}/api/users/profile/currentProfile`,\n              {\n                headers: {\n                  Authorization: localStorage.getItem('token'),\n                },\n              },\n            )\n            .then(res => {\n              dispatch(setCurProfile(res.data.data));\n              dispatch(setActiveIndex(res.data.data.profileId));\n              navi('/');\n            });\n        })\n        .catch(err => {\n          console.log(err);\n        });\n    }\n  };\n\n  if (authorization) {\n    dispatch(setAuth(true));\n    localStorage.setItem('token', authorization);\n    localStorage.setItem('tokenRefresh', refresh);\n    getUsers();\n  } else if (!authorization) {\n    navi('/login');\n\n    Swal.fire({\n      icon: 'error',\n      text: '로그인에 실패했습니다.',\n      confirmButtonColor: '#FFD337',\n    });\n  }\n\n  return (\n    <div className=\"flex-center h-[50vh] w-[100%]\">\n      <PulseLoader color=\"#FFD337\" />\n    </div>\n  );\n}\n\nexport default OauthLogin;\n"],"mappings":";;AAAA,SAASA,WAAW,QAAQ,kBAAkB;AAC9C,SAASC,WAAW,QAAQ,gBAAgB;AAC5C,SAASC,WAAW,EAAEC,WAAW,QAAQ,aAAa;AAEtD,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAOC,IAAI,MAAM,aAAa;AAC9B,SACEC,OAAO;AACP;AACAC,OAAO,EACPC,aAAa,EACbC,cAAc,QACT,8BAA8B;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEtC,SAASC,UAAUA,CAAA,EAAG;EAAAC,EAAA;EACpB,MAAMC,IAAI,GAAGd,WAAW,CAAC,CAAC;EAC1B,MAAMe,QAAQ,GAAGb,WAAW,CAAC,CAAC;EAE9B,MAAMc,GAAG,GAAG,IAAIC,GAAG,CAACC,MAAM,CAACC,QAAQ,CAACC,IAAI,CAAC;EACzC,MAAMC,aAAa,GAAGL,GAAG,CAACM,YAAY,CAACC,GAAG,CAAC,eAAe,CAAC;EAC3D,MAAMC,OAAO,GAAGR,GAAG,CAACM,YAAY,CAACC,GAAG,CAAC,SAAS,CAAC;EAE/C,MAAME,QAAQ,GAAGA,CAAA,KAAM;IACrB,IAAIC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,EAAE;MACjCvB,KAAK,CACFmB,GAAG,CAAE,GAAEK,OAAO,CAACC,GAAG,CAACC,iBAAkB,oBAAmB,EAAE;QACzDC,OAAO,EAAE;UACPC,aAAa,EAAEN,YAAY,CAACC,OAAO,CAAC,OAAO;QAC7C;MACF,CAAC,CAAC,CACDM,IAAI,CAACC,GAAG,IAAI;QACXnB,QAAQ,CAACR,OAAO,CAAC2B,GAAG,CAACC,IAAI,CAAC,CAAC;QAC3BpB,QAAQ,CAACP,aAAa,CAAC0B,GAAG,CAACC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;QACpC/B,KAAK,CACFmB,GAAG,CACD,GAAEK,OAAO,CAACC,GAAG,CAACC,iBAAkB,mCAAkC,EACnE;UACEC,OAAO,EAAE;YACPC,aAAa,EAAEN,YAAY,CAACC,OAAO,CAAC,OAAO;UAC7C;QACF,CACF,CAAC,CACAM,IAAI,CAACC,GAAG,IAAI;UACXnB,QAAQ,CAACP,aAAa,CAAC0B,GAAG,CAACC,IAAI,CAACA,IAAI,CAAC,CAAC;UACtCpB,QAAQ,CAACN,cAAc,CAACyB,GAAG,CAACC,IAAI,CAACA,IAAI,CAACC,SAAS,CAAC,CAAC;UACjDtB,IAAI,CAAC,GAAG,CAAC;QACX,CAAC,CAAC;MACN,CAAC,CAAC,CACDuB,KAAK,CAACC,GAAG,IAAI;QACZC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC;MAClB,CAAC,CAAC;IACN;EACF,CAAC;EAED,IAAIjB,aAAa,EAAE;IACjBN,QAAQ,CAACT,OAAO,CAAC,IAAI,CAAC,CAAC;IACvBoB,YAAY,CAACe,OAAO,CAAC,OAAO,EAAEpB,aAAa,CAAC;IAC5CK,YAAY,CAACe,OAAO,CAAC,cAAc,EAAEjB,OAAO,CAAC;IAC7CC,QAAQ,CAAC,CAAC;EACZ,CAAC,MAAM,IAAI,CAACJ,aAAa,EAAE;IACzBP,IAAI,CAAC,QAAQ,CAAC;IAEdT,IAAI,CAACqC,IAAI,CAAC;MACRC,IAAI,EAAE,OAAO;MACbC,IAAI,EAAE,cAAc;MACpBC,kBAAkB,EAAE;IACtB,CAAC,CAAC;EACJ;EAEA,oBACElC,OAAA;IAAKmC,SAAS,EAAC,+BAA+B;IAAAC,QAAA,eAC5CpC,OAAA,CAACV,WAAW;MAAC+C,KAAK,EAAC;IAAS;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAC5B,CAAC;AAEV;AAACvC,EAAA,CA5DQD,UAAU;EAAA,QACJZ,WAAW,EACPE,WAAW;AAAA;AAAAmD,EAAA,GAFrBzC,UAAU;AA8DnB,eAAeA,UAAU;AAAC,IAAAyC,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}